import{u as N,r as u,j as t}from"./index-40ad8b25.js";import{G as F,s as o}from"./GetStarted-44bb76d8.js";import{A as T}from"./AuthCardWrapper-3b0a85a9.js";import{B as A,N as U}from"./NotifyEvent-e2522bd1.js";import{A as C}from"./AuthFormFieldWithIcon-1029ad54.js";import{i as O}from"./invalidateAuthUsername-b1b2606f.js";import{r as w,e as D}from"./checkingRequiredField-382733fa.js";import{c as E}from"./auth-api-a0a156f1.js";import{u as H,a as W}from"./AssestsBaseUrl-2ebdccdb.js";import{d as k}from"./decrypt-a000b880.js";import"./CreateButton-86dcb64a.js";import"./Utils.module-b6acf444.js";import"./MethodType-30df8d44.js";const X=()=>{const{t:a}=H(),d=N(),[s,p]=u.useState({username:""}),[q,m]=u.useState(!1),[g,_]=u.useState(""),[v,n]=u.useState({open:!1,msg:"",variant:"error"}),[x]=E(),S=i=>{p(l=>({...l,username:i.target.value}))},b=i=>{i.preventDefault();let l=w(s);D(l)?(m(r=>!r),O(s==null?void 0:s.username)?n({msg:"Special Character not allowed in username.",open:!0,variant:"error"}):x({forgot:s}).then(r=>{var c,f,h;let e=k((c=r==null?void 0:r.data)==null?void 0:c.encrypt);(f=e==null?void 0:e.user)!=null&&f._id?d("/user/forget/verify",{state:{uid:(h=e==null?void 0:e.user)==null?void 0:h._id,phoneNumber:(e==null?void 0:e.sent_address)??"DONOT KNOW",type:(e==null?void 0:e.sent_type)??"DONOT Type"}}):n({msg:"Invalid Username",open:!0,variant:"error"}),m(j=>!j)}).catch(r=>{n({msg:`Time out of request with reason ${r}`,open:!0,variant:"error"}),m(e=>!e)})):_(l)},y=()=>{d("/")};return t.jsx(F,{children:t.jsx(T,{title:"forgot_password_heading",subTitle:a("forgot_passowrd_note"),subTitleStyle:{fontSize:"0.7rem"},titleStyle:{fontSize:"1rem"},children:t.jsxs("form",{onSubmit:b,className:o.auth_login_form,children:[t.jsx(C,{label:a("username"),placeholder:a("username_placeholder"),fieldIconUrl:`${W}/auth-user.svg`,validate:g.username,name:"username",value:s.username,onChange:S}),t.jsx("div",{className:o.auth_forget_container,style:{marginBottom:"0"},children:t.jsx("p",{className:o.auth_forget_text,onClick:y,children:a("forgot_username")})}),t.jsx("div",{className:o.auth_forget_container,children:t.jsx("p",{className:o.auth_forgot_username,children:a("forgot_username_note")})}),t.jsx(A,{type:"submit",buttonText:a("find_account")}),t.jsx(U,{eventState:v,eventStateHandler:n})]})})})};export{X as default};
