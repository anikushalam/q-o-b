import{u as _,r as n,j as a}from"./index-a832c91d.js";import{G as F,s as j}from"./GetStarted-a46d4f1e.js";import{A}from"./AuthCardWrapper-1a5695d9.js";import{B as T,N as U}from"./NotifyEvent-b529ab29.js";import{A as N}from"./AuthFormFieldWithIcon-7a3c3e8c.js";import{i as w}from"./invalidateAuthUsername-b1b2606f.js";import{r as C,e as E}from"./checkingRequiredField-382733fa.js";import{c as I}from"./auth-api-7a754eeb.js";import{u as q,a as B}from"./AssestsBaseUrl-de8d9127.js";import{d as H}from"./decrypt-68b9db7c.js";import"./CreateButton-84994172.js";import"./Utils.module-b6acf444.js";import"./MethodType-30df8d44.js";const V=()=>{const{t:s}=q(),p=_(),[t,f]=n.useState({username:""}),[W,u]=n.useState(!1),[h,g]=n.useState(""),[v,o]=n.useState({open:!1,msg:"",variant:"error"}),[S]=I(),b=m=>{f(i=>({...i,username:m.target.value}))},x=m=>{m.preventDefault();let i=C(t);E(i)?(u(r=>!r),w(t==null?void 0:t.username)?o({msg:"Special Character not allowed in username.",open:!0,variant:"error"}):S({forgot:t}).then(r=>{var l,d,c;let e=H((l=r==null?void 0:r.data)==null?void 0:l.encrypt);(d=e==null?void 0:e.institute)!=null&&d._id?p("/institute/forget/verify",{state:{uid:(c=e==null?void 0:e.institute)==null?void 0:c._id,phoneNumber:t.username}}):o({msg:"Invalid Username",open:!0,variant:"error"}),u(y=>!y)}).catch(r=>{o({msg:`Time out of request with reason ${r}`,open:!0,variant:"error"}),u(e=>!e)})):g(i)};return a.jsx(F,{children:a.jsx(A,{title:"forgot_password_heading",subTitle:s("forgot_passowrd_note"),subTitleStyle:{fontSize:"0.7rem"},titleStyle:{fontSize:"1rem"},children:a.jsxs("form",{onSubmit:x,className:j.auth_login_form,children:[a.jsx(N,{label:s("username"),placeholder:s("username_placeholder"),fieldIconUrl:`${B}/auth-user.svg`,validate:h.username,name:"username",value:t.username,onChange:b}),a.jsx(T,{type:"submit",buttonText:s("find_account"),customStyleButton:{marginTop:"4rem"}}),a.jsx(U,{eventState:v,eventStateHandler:o})]})})})};export{V as default};
