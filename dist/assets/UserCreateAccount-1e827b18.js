import{r as v,j as u,g as Pe,R as P,a as Ne,u as ze}from"./index-a832c91d.js";import{G as Ae,s as T}from"./GetStarted-a46d4f1e.js";import{u as ae,c as X,b as Fe}from"./AssestsBaseUrl-de8d9127.js";import{s as b,d as Y,F as ue}from"./dayjs.min-5d49fccd.js";import{B as Te,N as Oe}from"./NotifyEvent-b529ab29.js";import{M as we}from"./Modal-045d9623.js";import{r as $e,e as We}from"./checkingRequiredField-382733fa.js";import{i as Le}from"./invalidateAuthUsername-b1b2606f.js";import{f as Ie}from"./auth-api-7a754eeb.js";import{d as Ye}from"./decrypt-68b9db7c.js";import"./Utils.module-b6acf444.js";import"./MethodType-30df8d44.js";const ke=({selectLabel:r,onClick:o,selectedValue:e,options:t,customStyleContainer:n,customLabelStyle:a,customListStyle:i,errorShow:s,defalutValue:c})=>{const{t:l}=ae(),[h,g]=v.useState(!1),[f,_]=v.useState(""),w=()=>{g(m=>!m)};v.useEffect(()=>{c&&_(c)},[c]);const y=m=>{o(m),w(),_(m)};return u.jsxs("div",{className:b.form_input_container,style:{...n},children:[u.jsxs("p",{className:b.join_form_select_paragraph,style:{...a},children:[r,s&&u.jsxs("span",{style:{color:"red",marginLeft:"15px"},children:["* ",l("form_require_label")]})]}),u.jsxs("section",{className:b.join_form_select_custom,onClick:w,children:[f?u.jsx("p",{className:b.join_form_select_custom_paragraph,children:f??""}):u.jsx("p",{className:b.join_form_select_custom_paragraph,style:{color:"rgba(18, 18, 18, 0.5)"},children:e}),h?u.jsx("img",{className:b.join_form_select_custom_rotate_icon,src:`${X}/down.svg`,alt:"categor icon"}):u.jsx("img",{className:b.join_form_select_custom_icon,src:`${X}/down.svg`,alt:"categor icon"})]}),h&&u.jsx(u.Fragment,{children:u.jsx("section",{className:b.join_form_select_custom_list,style:i,children:t==null?void 0:t.map((m,C)=>u.jsx("p",{onClick:()=>y(m==null?void 0:m.key),className:b.join_form_select_custom_paragraph_option,children:l(m==null?void 0:m.name)},C))})})]})},Ze=[{name:"male",key:"Male"},{name:"female",key:"Female"},{name:"other",key:"Other"}],Ue=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Be=["January","February","March","April","May","June","July","August","September","October","November","December"],He=()=>{let r=new Date().getFullYear(),o=r-70,e=[];for(let t=r+30;t>=o;t--)e.push(t);return e.reverse()},Ge=[1,2,3,4,5,6,0],Xe=()=>new Date,Ve=r=>{let o=r==null?void 0:r.split("-"),e=new Date(`${o[2]}-${o[1]}-${o[0]}`),t=new Date;return e.getTime()<t.getTime()?!1:!(e.getTime()>t.getTime())},qe=(r,o)=>{let e=new Date(r),t=o==null?void 0:o.split("-"),n=new Date(`${t[2]}-${t[1]}-${t[0]}`);return e.getTime()<n.getTime()?!1:!(e.getTime()>n.getTime())},Je=r=>{let o=new Date(r);return new Date(o.getFullYear(),o.getMonth()+1,0)},Ke=r=>{let o=new Date(r);return new Date(o.getFullYear(),o.getMonth(),0)},Qe=r=>Je(r).getDate(),et=r=>Ke(r).getDate(),tt=r=>{let o=new Date(r);return new Date(o.getFullYear(),o.getMonth(),1).getDay()},ye=r=>Ge.indexOf(tt(r))+1,ot=r=>et(r)-ye(r),rt=7,nt=8,at=(r,o)=>{let e=1,t=1,n=new Date(r);const a={};for(let i=1;i<rt;i++)for(let s=1;s<nt;s++)a[i]||(a[i]=[]),i===1?s<ye(r)?(a[i]=[...a[i],{type:"PREVIOUS",date:`${o}-${n.getMonth()===0?12:n.getMonth()}-${n.getMonth()===0?n.getFullYear()-1:n.getFullYear()}`,value:o}],o++):(a[i]=[...a[i],{classes:"",date:`${e}-${n.getMonth()+1}-${n.getFullYear()}`,value:e}],e++):i>1&&e<Qe(r)+1?(a[i]=[...a[i],{type:"CURRENT",date:`${e}-${n.getMonth()+1}-${n.getFullYear()}`,value:e}],e++):(a[i]=[...a[i],{type:"NEXT_MONTH",date:`${t}-${n.getMonth()+2===13?1:n.getMonth()+2}-${n.getMonth()+2===13?n.getFullYear()+1:n.getFullYear()}`,value:t}],t++);return a},it=r=>{const[o,e]=v.useState(r??Xe()),t=ot(o),n=v.useMemo(()=>at(o,t),[o,t]),a=v.useCallback(()=>{e(c=>new Date(c.getFullYear(),c.getMonth()-1,1))},[]),i=v.useCallback(()=>{e(c=>new Date(c.getFullYear(),c.getMonth()+1,1))},[]),s=v.useCallback(c=>{let l=c==null?void 0:c.split("-"),h=new Date(`${l[2]}-${l[1]}-${l[0]}`);e(h)},[]);return{selectedDate:o,setSelectedDate:e,getPreviousMonth:a,getNextMonth:i,getSelectedDate:s,generateCalendar:n}},st="_calendar_1li87_1",ct="_calendar_top_1li87_7",lt="_calendar_days_1li87_28",ut="_calendar_days_label_1li87_35",ht="_calendar_days_value_1li87_45",dt="_calendar_days_value_active_1li87_62",pt="_calendar_month_1li87_65",mt="_calendar_month_value_1li87_74",ft="_calendar_month_value_active_1li87_92",D={calendar:st,calendar_top:ct,calendar_days:lt,calendar_days_label:ut,calendar_days_value:ht,calendar_days_value_active:dt,calendar_month:pt,calendar_month_value:mt,calendar_month_value_active:ft},gt=({onClose:r,date:o,onDateSelect:e})=>{var R;const{selectedDate:t,setSelectedDate:n,getPreviousMonth:a,getNextMonth:i,getSelectedDate:s,generateCalendar:c}=it(),[l,h]=v.useState(""),g=d=>{s(d),e(d),r()},f=He(),_=v.useMemo(()=>f.indexOf(t.getFullYear()),[t,f]),[w,y]=v.useState(0),m=v.useMemo(()=>f.slice(_+12*w,w?_+12*w+12:_+12),[f,w,_]),C=v.useCallback(()=>{h(l?"":"MONTH")},[l]),E=v.useCallback(()=>{h(l?"":"YEAR")},[l]),N=v.useCallback(d=>{n(p=>new Date(`${d} ${p.getDate()} ${p.getFullYear()}`)),C()},[C]),$=v.useCallback(d=>{n(p=>new Date(`${p.getMonth()+1} ${p.getDate()} ${d}`)),E()},[E]),W=()=>{l?l==="YEAR"&&y(d=>d=d-1):a()},A=()=>{l?l==="YEAR"&&y(d=>d=d+1):i()};return u.jsx(we,{onClose:r,customBackdropStyle:{zIndex:"2000"},customOverlayStyle:{zIndex:"2000"},children:u.jsxs("div",{className:D.calendar,children:[u.jsxs("div",{className:D.calendar_top,children:[u.jsx("img",{src:`${X}/refresh.svg`,alt:"previous icon",onClick:W}),u.jsxs("h6",{children:[u.jsx("span",{onClick:C,children:Y(t).format("MMMM")})," ",u.jsx("span",{onClick:E,children:Y(t).format("YYYY")})]}),u.jsx("img",{src:`${X}/refresh.svg`,alt:"next icon",onClick:A})]}),l==="MONTH"?u.jsx("div",{className:D.calendar_month,children:Be.map(d=>u.jsx("p",{className:Y(t).format("MMMM")===d?`${D.calendar_month_value} ${D.calendar_month_value_active}`:D.calendar_month_value,onClick:()=>N(d),children:d},d))}):l==="YEAR"?u.jsx("div",{className:D.calendar_month,children:m==null?void 0:m.map(d=>u.jsx("p",{className:Y(t).format("YYYY")===`${d}`?`${D.calendar_month_value} ${D.calendar_month_value_active}`:D.calendar_month_value,onClick:()=>$(d),children:d},d))}):u.jsxs("div",{children:[u.jsx("div",{className:D.calendar_days,children:Ue.map(d=>u.jsx("p",{className:D.calendar_days_label,children:d},d))}),(R=Object.values(c))==null?void 0:R.map(d=>u.jsx("div",{className:D.calendar_days,children:d.map(p=>u.jsx("p",{className:D.calendar_days_value,style:{"--calendar-border":Ve(p==null?void 0:p.date)?"#123456":qe(t,p==null?void 0:p.date)?"red":""},onClick:()=>g(p==null?void 0:p.date),children:p==null?void 0:p.value},p==null?void 0:p.date))}))]})]})})},vt=({label:r,name:o,msg:e,value:t,onChange:n,placeholder:a,customFormInputContainer:i,customFormInputLabel:s,customFormInput:c,errorShow:l,disabled:h})=>{const{t:g}=ae(),[f,_]=v.useState(!1),w=()=>{_(y=>!y)};return u.jsxs("div",{className:b.form_input_container,style:i,children:[r&&u.jsxs("label",{className:b.form_input_label,style:s,htmlFor:o,children:[r,e?u.jsx("span",{className:b.form_input_label_error,children:e}):l?u.jsxs("span",{className:b.form_input_label_error,children:["* ",g("form_require_label")]}):null]}),u.jsx("input",{className:b.form_input,type:"text",defaultValue:t,name:o,placeholder:a,disabled:h,style:c,onFocus:w}),f&&u.jsx(gt,{onClose:w,onDateSelect:n})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q=function(r,o){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},q(r,o)};function _t(r,o){q(r,o);function e(){this.constructor=r}r.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}var x=function(){return x=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a])}return o},x.apply(this,arguments)},he=!1,z,J,K,B,H,Ce,G,Q,ee,te,xe,oe,re,De,Se;function S(){if(!he){he=!0;var r=navigator.userAgent,o=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(r),e=/(Mac OS X)|(Windows)|(Linux)/.exec(r);if(oe=/\b(iPhone|iP[ao]d)/.exec(r),re=/\b(iP[ao]d)/.exec(r),te=/Android/i.exec(r),De=/FBAN\/\w+;/i.exec(r),Se=/Mobile/i.exec(r),xe=!!/Win64/.exec(r),o){z=o[1]?parseFloat(o[1]):o[5]?parseFloat(o[5]):NaN,z&&document&&document.documentMode&&(z=document.documentMode);var t=/(?:Trident\/(\d+.\d+))/.exec(r);Ce=t?parseFloat(t[1])+4:z,J=o[2]?parseFloat(o[2]):NaN,K=o[3]?parseFloat(o[3]):NaN,B=o[4]?parseFloat(o[4]):NaN,B?(o=/(?:Chrome\/(\d+\.\d+))/.exec(r),H=o&&o[1]?parseFloat(o[1]):NaN):H=NaN}else z=J=K=H=B=NaN;if(e){if(e[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(r);G=n?parseFloat(n[1].replace("_",".")):!0}else G=!1;Q=!!e[2],ee=!!e[3]}else G=Q=ee=!1}}var ne={ie:function(){return S()||z},ieCompatibilityMode:function(){return S()||Ce>z},ie64:function(){return ne.ie()&&xe},firefox:function(){return S()||J},opera:function(){return S()||K},webkit:function(){return S()||B},safari:function(){return ne.webkit()},chrome:function(){return S()||H},windows:function(){return S()||Q},osx:function(){return S()||G},linux:function(){return S()||ee},iphone:function(){return S()||oe},mobile:function(){return S()||oe||re||te||Se},nativeApp:function(){return S()||De},android:function(){return S()||te},ipad:function(){return S()||re}},wt=ne,k=!!(typeof window<"u"&&window.document&&window.document.createElement),yt={canUseDOM:k,canUseWorkers:typeof Worker<"u",canUseEventListeners:k&&!!(window.addEventListener||window.attachEvent),canUseViewport:k&&!!window.screen,isInWorker:!k},Ct=yt,be=Ct,Re;be.canUseDOM&&(Re=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function xt(r,o){if(!be.canUseDOM||o&&!("addEventListener"in document))return!1;var e="on"+r,t=e in document;if(!t){var n=document.createElement("div");n.setAttribute(e,"return;"),t=typeof n[e]=="function"}return!t&&Re&&r==="wheel"&&(t=document.implementation.hasFeature("Events.wheel","3.0")),t}var Dt=xt,St=wt,bt=Dt,de=10,pe=40,me=800;function Me(r){var o=0,e=0,t=0,n=0;return"detail"in r&&(e=r.detail),"wheelDelta"in r&&(e=-r.wheelDelta/120),"wheelDeltaY"in r&&(e=-r.wheelDeltaY/120),"wheelDeltaX"in r&&(o=-r.wheelDeltaX/120),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(o=e,e=0),t=o*de,n=e*de,"deltaY"in r&&(n=r.deltaY),"deltaX"in r&&(t=r.deltaX),(t||n)&&r.deltaMode&&(r.deltaMode==1?(t*=pe,n*=pe):(t*=me,n*=me)),t&&!o&&(o=t<1?-1:1),n&&!e&&(e=n<1?-1:1),{spinX:o,spinY:e,pixelX:t,pixelY:n}}Me.getEventType=function(){return St.firefox()?"DOMMouseScroll":bt("wheel")?"wheel":"mousewheel"};var Rt=Me,Mt=Rt;const Et=Pe(Mt);function jt(r,o,e,t,n,a){a===void 0&&(a=0);var i=O(r,o,a),s=i.width,c=i.height,l=Math.min(s,e),h=Math.min(c,t);return l>h*n?{width:h*n,height:h}:{width:l,height:l/n}}function Pt(r){return r.width>r.height?r.width/r.naturalWidth:r.height/r.naturalHeight}function Z(r,o,e,t,n){n===void 0&&(n=0);var a=O(o.width,o.height,n),i=a.width,s=a.height;return{x:fe(r.x,i,e.width,t),y:fe(r.y,s,e.height,t)}}function fe(r,o,e,t){var n=o*t/2-e/2;return V(r,-n,n)}function ge(r,o){return Math.sqrt(Math.pow(r.y-o.y,2)+Math.pow(r.x-o.x,2))}function ve(r,o){return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}function Nt(r,o,e,t,n,a,i){a===void 0&&(a=0),i===void 0&&(i=!0);var s=i?zt:At,c=O(o.width,o.height,a),l=O(o.naturalWidth,o.naturalHeight,a),h={x:s(100,((c.width-e.width/n)/2-r.x/n)/c.width*100),y:s(100,((c.height-e.height/n)/2-r.y/n)/c.height*100),width:s(100,e.width/c.width*100/n),height:s(100,e.height/c.height*100/n)},g=Math.round(s(l.width,h.width*l.width/100)),f=Math.round(s(l.height,h.height*l.height/100)),_=l.width>=l.height*t,w=_?{width:Math.round(f*t),height:f}:{width:g,height:Math.round(g/t)},y=x(x({},w),{x:Math.round(s(l.width-w.width,h.x*l.width/100)),y:Math.round(s(l.height-w.height,h.y*l.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:y}}function zt(r,o){return Math.min(r,Math.max(0,o))}function At(r,o){return o}function Ft(r,o,e,t,n,a){var i=O(o.width,o.height,e),s=V(t.width/i.width*(100/r.width),n,a),c={x:s*i.width/2-t.width/2-i.width*s*(r.x/100),y:s*i.height/2-t.height/2-i.height*s*(r.y/100)};return{crop:c,zoom:s}}function Tt(r,o,e){var t=Pt(o);return e.height>e.width?e.height/(r.height*t):e.width/(r.width*t)}function Ot(r,o,e,t,n,a){e===void 0&&(e=0);var i=O(o.naturalWidth,o.naturalHeight,e),s=V(Tt(r,o,t),n,a),c=t.height>t.width?t.height/r.height:t.width/r.width,l={x:((i.width-r.width)/2-r.x)*c,y:((i.height-r.height)/2-r.y)*c};return{crop:l,zoom:s}}function _e(r,o){return{x:(o.x+r.x)/2,y:(o.y+r.y)/2}}function $t(r){return r*Math.PI/180}function O(r,o,e){var t=$t(e);return{width:Math.abs(Math.cos(t)*r)+Math.abs(Math.sin(t)*o),height:Math.abs(Math.sin(t)*r)+Math.abs(Math.cos(t)*o)}}function V(r,o,e){return Math.min(Math.max(r,o),e)}function U(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var Wt=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Lt=1,It=3,Yt=function(r){_t(o,r);function o(){var e=r!==null&&r.apply(this,arguments)||this;return e.imageRef=P.createRef(),e.videoRef=P.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.state={cropSize:null,hasWheelJustStarted:!1},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var t=!0;e.resizeObserver=new window.ResizeObserver(function(n){if(t){t=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(t){return t.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturemove",e.onGestureMove),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var t=e.computeSizes();t&&(e.emitCropData(),e.setInitialCrop(t)),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(t){if(e.props.initialCroppedAreaPercentages){var n=Ft(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),a=n.crop,i=n.zoom;e.props.onCropChange(a),e.props.onZoomChange&&e.props.onZoomChange(i)}else if(e.props.initialCroppedAreaPixels){var s=Ot(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),a=s.crop,i=s.zoom;e.props.onCropChange(a),e.props.onZoomChange&&e.props.onZoomChange(i)}},e.computeSizes=function(){var t,n,a,i,s,c,l=e.imageRef.current||e.videoRef.current;if(l&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var h=e.containerRect.width/e.containerRect.height,g=((t=e.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((n=e.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,f=((a=e.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((i=e.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,_=l.offsetWidth<g||l.offsetHeight<f,w=g/f,y=void 0;if(_){var m=e.getObjectFit();switch(m){default:case"contain":y=h>w?{width:e.containerRect.height*w,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/w};break;case"horizontal-cover":y={width:e.containerRect.width,height:e.containerRect.width/w};break;case"vertical-cover":y={width:e.containerRect.height*w,height:e.containerRect.height};break}}else y={width:l.offsetWidth,height:l.offsetHeight};e.mediaSize=x(x({},y),{naturalWidth:g,naturalHeight:f}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var C=e.props.cropSize?e.props.cropSize:jt(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((s=e.state.cropSize)===null||s===void 0?void 0:s.height)!==C.height||((c=e.state.cropSize)===null||c===void 0?void 0:c.width)!==C.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(C),e.setState({cropSize:C},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(C),C}},e.saveContainerPosition=function(){if(e.containerRef){var t=e.containerRef.getBoundingClientRect();e.containerPosition={x:t.left,y:t.top}}},e.onMouseDown=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(o.getMousePoint(t)))},e.onMouseMove=function(t){return e.onDrag(o.getMousePoint(t))},e.onScroll=function(t){e.currentDoc&&(t.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(t){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(t))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),t.touches.length===2?e.onPinchStart(t):t.touches.length===1&&e.onDragStart(o.getTouchPoint(t.touches[0]))))},e.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?e.onPinchMove(t):t.touches.length===1&&e.onDrag(o.getTouchPoint(t.touches[0]))},e.onGestureStart=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureMove),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureMove=function(t){if(t.preventDefault(),!e.isTouching){var n=o.getMousePoint(t),a=e.gestureZoomStart-1+t.scale;if(e.setNewZoom(a,n,{shouldUpdatePosition:!0}),e.props.onRotationChange){var i=e.gestureRotationStart+t.rotation;e.props.onRotationChange(i)}}},e.onGestureEnd=function(t){e.cleanEvents()},e.onDragStart=function(t){var n,a,i=t.x,s=t.y;e.dragStartPosition={x:i,y:s},e.dragStartCrop=x({},e.props.crop),(a=(n=e.props).onInteractionStart)===null||a===void 0||a.call(n)},e.onDrag=function(t){var n=t.x,a=t.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(n===void 0||a===void 0)){var i=n-e.dragStartPosition.x,s=a-e.dragStartPosition.y,c={x:e.dragStartCrop.x+i,y:e.dragStartCrop.y+s},l=e.props.restrictPosition?Z(c,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):c;e.props.onCropChange(l)}}))},e.onDragStopped=function(){var t,n;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(n=(t=e.props).onInteractionEnd)===null||n===void 0||n.call(t)},e.onWheel=function(t){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(t))){t.preventDefault();var n=o.getMousePoint(t),a=Et(t).pixelY,i=e.props.zoom-a*e.props.zoomSpeed/200;e.setNewZoom(i,n,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var s,c;return(c=(s=e.props).onInteractionStart)===null||c===void 0?void 0:c.call(s)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var s,c;return(c=(s=e.props).onInteractionEnd)===null||c===void 0?void 0:c.call(s)})},250)}},e.getPointOnContainer=function(t,n){var a=t.x,i=t.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(a-n.x),y:e.containerRect.height/2-(i-n.y)}},e.getPointOnMedia=function(t){var n=t.x,a=t.y,i=e.props,s=i.crop,c=i.zoom;return{x:(n+s.x)/c,y:(a+s.y)/c}},e.setNewZoom=function(t,n,a){var i=a===void 0?{}:a,s=i.shouldUpdatePosition,c=s===void 0?!0:s;if(!(!e.state.cropSize||!e.props.onZoomChange)){var l=V(t,e.props.minZoom,e.props.maxZoom);if(c){var h=e.getPointOnContainer(n,e.containerPosition),g=e.getPointOnMedia(h),f={x:g.x*l-h.x,y:g.y*l-h.y},_=e.props.restrictPosition?Z(f,e.mediaSize,e.state.cropSize,l,e.props.rotation):f;e.props.onCropChange(_)}e.props.onZoomChange(l)}},e.getCropData=function(){if(!e.state.cropSize)return null;var t=e.props.restrictPosition?Z(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return Nt(t,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var t=e.getCropData();if(t){var n=t.croppedAreaPercentages,a=t.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(n,a),e.props.onCropAreaChange&&e.props.onCropAreaChange(n,a)}},e.emitCropAreaChange=function(){var t=e.getCropData();if(t){var n=t.croppedAreaPercentages,a=t.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(n,a)}},e.recomputeCropPosition=function(){if(e.state.cropSize){var t=e.props.restrictPosition?Z(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;e.props.onCropChange(t),e.emitCropData()}},e}return o.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Wt,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var e,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(e){var t,n,a,i,s,c,l,h,g;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((t=e.cropSize)===null||t===void 0?void 0:t.height)!==((n=this.props.cropSize)===null||n===void 0?void 0:n.height)||((a=e.cropSize)===null||a===void 0?void 0:a.width)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.width)?this.computeSizes():(((s=e.crop)===null||s===void 0?void 0:s.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((l=e.crop)===null||l===void 0?void 0:l.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((g=this.videoRef.current)===null||g===void 0||g.load())},o.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},o.prototype.getObjectFit=function(){var e,t,n,a;if(this.props.objectFit==="cover"){var i=this.imageRef.current||this.videoRef.current;if(i&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,c=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,l=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,h=c/l;return h<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(e){var t=o.getTouchPoint(e.touches[0]),n=o.getTouchPoint(e.touches[1]);this.lastPinchDistance=ge(t,n),this.lastPinchRotation=ve(t,n),this.onDragStart(_e(t,n))},o.prototype.onPinchMove=function(e){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var n=o.getTouchPoint(e.touches[0]),a=o.getTouchPoint(e.touches[1]),i=_e(n,a);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=ge(n,a),c=t.props.zoom*(s/t.lastPinchDistance);t.setNewZoom(c,i,{shouldUpdatePosition:!1}),t.lastPinchDistance=s;var l=ve(n,a),h=t.props.rotation+(l-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(h),t.lastPinchRotation=l})}},o.prototype.render=function(){var e=this,t=this.props,n=t.image,a=t.video,i=t.mediaProps,s=t.transform,c=t.crop,l=c.x,h=c.y,g=t.rotation,f=t.zoom,_=t.cropShape,w=t.showGrid,y=t.style,m=y.containerStyle,C=y.cropAreaStyle,E=y.mediaStyle,N=t.classes,$=N.containerClassName,W=N.cropAreaClassName,A=N.mediaClassName,R=this.getObjectFit();return P.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(p){return e.containerRef=p},"data-testid":"container",style:m,className:U("reactEasyCrop_Container",$)},n?P.createElement("img",x({alt:"",className:U("reactEasyCrop_Image",R==="contain"&&"reactEasyCrop_Contain",R==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",R==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},i,{src:n,ref:this.imageRef,style:x(x({},E),{transform:s||"translate(".concat(l,"px, ").concat(h,"px) rotate(").concat(g,"deg) scale(").concat(f,")")}),onLoad:this.onMediaLoad})):a&&P.createElement("video",x({autoPlay:!0,loop:!0,muted:!0,className:U("reactEasyCrop_Video",R==="contain"&&"reactEasyCrop_Contain",R==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",R==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",A)},i,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:x(x({},E),{transform:s||"translate(".concat(l,"px, ").concat(h,"px) rotate(").concat(g,"deg) scale(").concat(f,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(d){return P.createElement("source",x({key:d.src},d))})),this.state.cropSize&&P.createElement("div",{style:x(x({},C),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:U("reactEasyCrop_CropArea",_==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",W)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:It,minZoom:Lt,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},o.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o}(P.Component);const kt=r=>new Promise((o,e)=>{const t=new Image;t.addEventListener("load",()=>o(t)),t.addEventListener("error",n=>e(n)),t.setAttribute("crossOrigin","anonymous"),t.src=r});function Ee(r){return r*Math.PI/180}function Zt(r,o,e){const t=Ee(e);return{width:Math.abs(Math.cos(t)*r)+Math.abs(Math.sin(t)*o),height:Math.abs(Math.sin(t)*r)+Math.abs(Math.cos(t)*o)}}async function Ut(r,o,e=0,t={horizontal:!1,vertical:!1}){const n=await kt(r),a=document.createElement("canvas"),i=a.getContext("2d");if(!i)return null;const s=Ee(e),{width:c,height:l}=Zt(n.width,n.height,e);a.width=c,a.height=l,i.translate(c/2,l/2),i.rotate(s),i.scale(t.horizontal?-1:1,t.vertical?-1:1),i.translate(-n.width/2,-n.height/2),i.drawImage(n,0,0);const h=i.getImageData(o.x,o.y,o.width,o.height);return a.width=o.width,a.height=o.height,i.putImageData(h,0,0),new Promise((g,f)=>{a.toBlob(_=>{_.name="cropped.jpeg",g({file:_,url:URL.createObjectURL(_)})},"image/jpeg")})}const Bt="_image_crop_12maz_1",Ht="_crop_container_12maz_5",Gt="_crop_action_12maz_11",Xt="_crop_action_cancel_12maz_17",Vt="_crop_action_crop_12maz_37",L={image_crop:Bt,crop_container:Ht,crop_action:Gt,crop_action_cancel:Xt,crop_action_crop:Vt},qt=({widthRatio:r,heightRatio:o,fileUrl:e,setFileUrl:t,onFileBlob:n,onClose:a})=>{const[i,s]=v.useState({x:0,y:0}),[c,l]=v.useState(1),[h,g]=v.useState(0),[f,_]=v.useState(null),w=(m,C)=>{_(C)},y=async()=>{try{const{file:m,url:C}=await Ut(e,f,h);t(C),n(m)}catch(m){console.log(m)}};return u.jsx(we,{customOverlayStyle:{border:"none",borderRadius:"0"},children:u.jsxs("div",{className:L.image_crop,children:[u.jsx("div",{className:L.crop_container,children:u.jsx(Yt,{image:e,crop:i,zoom:c,rotation:h,aspect:r/o,onZoomChange:l,onRotationChange:g,onCropChange:s,onCropComplete:w})}),u.jsxs("div",{className:L.crop_action,children:[u.jsx("h6",{onClick:()=>a(""),className:L.crop_action_cancel,children:"cancel"}),u.jsx("h6",{onClick:y,className:L.crop_action_crop,children:"crop"})]})]})})},Jt=r=>{const o=new Date,e=r==null?void 0:r.split("-"),t=new Date(`${e[2]}-${e[1]}-${e[0]}`);return!(o<=t)},Kt=r=>{let o=r==null?void 0:r.split("/");return`${o[2]}-${o[1]}-${o[0]}`},Qt=r=>{var e;let o=r==null?void 0:r.split("-");return((e=o[2])==null?void 0:e.length)>2?`${o[0]>9?o[0]:`0${o[0]}`}/${o[1]>9?o[1]:`0${o[1]}`}/${o[2]}`:`${o[2]>9?o[2]:`0${o[2]}`}/${o[1]>9?o[1]:`0${o[1]}`}/${o[0]}`},po=()=>{const{t:r}=ae(),o=Ne(),e=ze(),[t,n]=v.useState({username:"",userLegalName:"",userDateOfBirth:"",userGender:""}),[a,i]=v.useState(""),[s,c]=v.useState(""),[l,h]=v.useState(!1),[g,f]=v.useState(!1),[_,w]=v.useState(""),[y,m]=v.useState({open:!1,msg:"",variant:"error"}),[C]=Ie(),E=d=>{n(p=>({...p,[d.target.name]:d.target.value}))},N=d=>{n(p=>({...p,userGender:d}))},$=d=>{Jt(d)?n(p=>({...p,userDateOfBirth:Qt(d)})):m({msg:"Date of birth is not for upcoming date",open:!0,variant:"error"})},W=d=>{var p;if(((p=d.target.files)==null?void 0:p.length)>0){const I=URL.createObjectURL(d.target.files[0]);i(d.target.files[0]),c(I),h(!0)}},A=d=>{i(d),h(!1)},R=d=>{var I,ie;d.preventDefault();let p=$e(t,["userDateOfBirth"]);if(We(p)&&((I=o.state)!=null&&I.phoneNumber))if(f(F=>!F),Le(t==null?void 0:t.username))m({msg:"Special Character not allowed in username.",open:!0,variant:"error"});else{const F=new FormData;for(let M in t)M==="userDateOfBirth"?F.append(M,Kt(t[M])):F.append(M,t[M]);a&&F.append("file",a),C({userPhoneNumber:(ie=o.state)==null?void 0:ie.phoneNumber,profileCreation:F}).then(M=>{var se,ce,le;const j=Ye((se=M==null?void 0:M.data)==null?void 0:se.encrypt);(ce=j==null?void 0:j.user)!=null&&ce._id?e("/user/create/account/password",{state:{uid:(le=j==null?void 0:j.user)==null?void 0:le._id}}):m({msg:"user profile is not created",open:!0,variant:"error"}),f(je=>!je)}).catch(M=>{m({msg:`Time out of request with reason ${M}`,open:!0,variant:"error"}),f(j=>!j)})}else w(p)};return u.jsxs(u.Fragment,{children:[u.jsx(Ae,{children:u.jsxs("div",{className:T.auth_card_wrapper,children:[u.jsxs("div",{className:T.auth_create_container,children:[u.jsxs("div",{children:[u.jsx("h6",{className:T.auth_card_title,style:{fontSize:"1rem"},children:r("create_profile")}),u.jsx("h6",{className:T.auth_card_subtitle,style:{fontSize:"0.7rem"},children:r("create_profile_note")})]}),u.jsx("label",{htmlFor:"profile",className:T.create_profile_label,children:u.jsx("img",{src:s||`${Fe}/feed-user-avatar.svg`,alt:"profile icon"})}),u.jsx("input",{type:"file",accept:"image/*",id:"profile",style:{display:"none"},onChange:W})]}),u.jsxs("div",{className:T.auth_login_form,style:{marginTop:"0"},children:[" ",u.jsxs("form",{onSubmit:R,children:[u.jsx(ue,{label:r("name"),placeholder:r("name_placeholder"),name:"userLegalName",value:t.userLegalName,type:"text",onChange:E,errorShow:_.userLegalName}),u.jsx(ue,{label:r("username"),placeholder:r("username_placeholder"),name:"username",value:t.username,type:"text",onChange:E,errorShow:_.username}),u.jsx(vt,{label:r("date_of_birth"),placeholder:"dd/mm/yyyy",name:"userDateOfBirth",value:t.userDateOfBirth,onChange:$}),u.jsx(ke,{selectLabel:r("gender"),name:"userGender",selectedValue:r("please_select_your_gender"),options:Ze,defalutValue:t.userGender,onClick:N,errorShow:_.userGender}),u.jsx(Te,{type:"submit",buttonText:r("continue_to_proceed"),disabled:g,customStyleButton:{marginTop:"1.5rem"}})]})]})]})}),l&&u.jsx(qt,{widthRatio:1,heightRatio:1,fileUrl:s,setFileUrl:c,onFileBlob:A,onClose:h}),u.jsx(Oe,{eventState:y,eventStateHandler:m})]})};export{po as default};
