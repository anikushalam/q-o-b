import{j as a,i as M,r as e}from"./index-840de58d.js";import{U as P,s as d}from"./FinanceManager-0ca2f058.js";import{U as v,B as y}from"./UserMemberContentWrapper-d4cbea5a.js";import{a as C,a0 as F,n as L,j as D}from"./StaffMemberConfig-7a36179e.js";import{u as N,b as Y,f as k}from"./AssestsBaseUrl-3e7ac4b0.js";import{d as w}from"./dayjs.min-1b7b0994.js";import{L as B}from"./Loading-1f40e573.js";import"./UiTab.module-f6b989ec.js";import"./FormInputView-8f94e437.js";import"./CreateButton-390a73d1.js";import"./auth-api-76ff487b.js";import"./MethodType-30df8d44.js";import"./Modal-6a8c66d1.js";import"./BackdropModal-142f7ac8.js";import"./Utils.module-b6acf444.js";import"./checkingRequiredField-382733fa.js";import"./PlateformUser.module-0e3694bb.js";import"./decrypt-c89175fd.js";import"./UserDrawer-bfa56692.js";const E="_exemption_card_1hrbv_1",T="_exemption_card_text_1hrbv_23",V="_exemption_card_name_1hrbv_26",W="_exemption_card_amount_1hrbv_27",I="_exemption_card_batch_1hrbv_28",h={exemption_card:E,exemption_card_text:T,exemption_card_name:V,exemption_card_amount:W,exemption_card_batch:I},b=({exemption:s})=>{var c,o,i,u,m,_,j,f,n;const{t:l}=N();return a.jsxs("section",{className:h.exemption_card,children:[a.jsx("img",{src:(c=s==null?void 0:s.student)!=null&&c.studentProfilePhoto?`${M}/${(o=s==null?void 0:s.student)==null?void 0:o.studentProfilePhoto}`:`${Y}/feed-user-avatar.svg`,alt:"student avatar"}),a.jsxs("div",{className:h.exemption_card_text,children:[a.jsxs("div",{className:h.exemption_card_name,children:[a.jsx("h6",{children:`${(i=s==null?void 0:s.student)==null?void 0:i.studentFirstName} ${(u=s==null?void 0:s.student)!=null&&u.studentMiddleName?(m=s==null?void 0:s.student)==null?void 0:m.studentMiddleName:""} ${(_=s==null?void 0:s.student)==null?void 0:_.studentLastName}`}),a.jsxs("h6",{children:[l("rs")," ",(s==null?void 0:s.fee_payment_amount)??0]})]}),a.jsxs("div",{className:h.exemption_card_amount,children:[a.jsx("p",{children:l("admission_fees_paid")}),a.jsx("p",{children:((j=s==null?void 0:s.student)==null?void 0:j.admissionPaidFeeCount)??0})]}),a.jsxs("div",{className:h.exemption_card_batch,children:[a.jsx("p",{children:`(${((n=(f=s==null?void 0:s.student)==null?void 0:f.batches)==null?void 0:n.batchName)??""})`}),a.jsx("p",{children:w(s==null?void 0:s.fee_transaction_date).format("DD MMM YYYY")})]})]})]})},ds=({fid:s,exemptBalance:l})=>{const{t:c}=N(),[o,i]=e.useState(""),[u,m]=e.useState(1),[_,j]=e.useState(!0),[f,n]=C({skip:o}),{financeAllExemption:t,financeAllExemptionLoading:g}=F({data:{fid:s,page:u,limit:2},skip:!s});e.useEffect(()=>{n&&_&&m(r=>r+1)},[n,_]),e.useEffect(()=>{t!=null&&t.length&&L(financeFeeList==null?void 0:financeFeeList.length,j)},[t==null?void 0:t.length]);const U=e.useCallback(D(r=>i(r),500),[]),$=r=>{U(r.target.value)};return a.jsxs(P,{children:[a.jsx(v,{children:a.jsxs("div",{className:d.fm_header_container,children:[a.jsx("h6",{children:c("exemption_unrecovered")}),a.jsx("div",{className:d.fm_search,children:a.jsx("section",{className:d.fm_search_container,children:a.jsxs("div",{className:d.fm_search_container_inner,children:[a.jsx("img",{className:d.fm_search_icon,alt:"search icon",src:`${k}/navbar-search.svg`}),a.jsx("input",{type:"text",placeholder:c("search"),onChange:$})]})})})]})}),a.jsx(y,{}),a.jsxs(v,{customStyle:{paddingTop:"0"},children:[a.jsx("p",{className:d.fm_all_time_data,children:c("all_time_data")}),a.jsxs("h6",{className:d.fm_total_amount,children:[c("total_amount")," ",c("rs")," ",l??0]}),g&&a.jsx(B,{}),t==null?void 0:t.map((r,S)=>(t==null?void 0:t.length)===S+1?a.jsx("div",{ref:f,children:a.jsx(b,{exemption:r})},r==null?void 0:r._id):a.jsx(b,{exemption:r},r==null?void 0:r._id))]})]})};export{ds as default};
