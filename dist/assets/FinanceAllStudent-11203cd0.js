import{j as a,f as y,a as u,L as R,i as A,u as G,r as _}from"./index-840de58d.js";import{U as z,s as c}from"./FinanceManager-0ca2f058.js";import{B as x,U as h}from"./UserMemberContentWrapper-d4cbea5a.js";import{a as D,I as O,n as Q,j as V}from"./StaffMemberConfig-7a36179e.js";import{u as $,b as W,e as p,f as H,c as q}from"./AssestsBaseUrl-3e7ac4b0.js";import{C as J}from"./CreateButton-390a73d1.js";import{L as K}from"./Loading-1f40e573.js";import{A as X}from"./AllStudentMessageSend-4d149179.js";import"./UiTab.module-f6b989ec.js";import"./FormInputView-8f94e437.js";import"./dayjs.min-1b7b0994.js";import"./auth-api-76ff487b.js";import"./MethodType-30df8d44.js";import"./Modal-6a8c66d1.js";import"./BackdropModal-142f7ac8.js";import"./Utils.module-b6acf444.js";import"./checkingRequiredField-382733fa.js";import"./PlateformUser.module-0e3694bb.js";import"./decrypt-c89175fd.js";import"./UserDrawer-bfa56692.js";import"./FormTextarea-b8631928.js";const Y="_student_table_15ul5_1",Z="_student_table_header_15ul5_5",I="_student_table_header_label_15ul5_10",ee="_student_table_content_card_15ul5_19",ae="_student_table_profile_15ul5_28",se="_student_table_header_name_15ul5_40",le="_student_table_header_label_text_15ul5_47",re="_student_table_contact_15ul5_53",te="_student_table_contact_email_15ul5_62",_e="_student_table_contact_number_15ul5_68",s={student_table:Y,student_table_header:Z,student_table_header_label:I,student_table_content_card:ee,student_table_profile:ae,student_table_header_name:se,student_table_header_label_text:le,student_table_contact:re,student_table_contact_email:te,student_table_contact_number:_e},ce=({studentAlias:e})=>{const{t}=$();return a.jsx("div",{className:s.student_table,children:a.jsxs("div",{className:s.student_table_header,children:[a.jsx("p",{className:s.student_table_header_label,style:{flex:"1"},children:e??t("gr_no")}),a.jsx("p",{className:s.student_table_header_label,style:{flex:"3"},children:t("name")}),a.jsx("p",{className:s.student_table_header_label,style:{flex:"2"},children:t("contact_number")}),a.jsx("p",{className:s.student_table_header_label,style:{flex:"1"},children:t("applicable_outs")})]})})},v=({student:e,messageId:t,headId:o,instituteId:n})=>{var i;const m=y(),b=u();return a.jsx(a.Fragment,{children:a.jsxs(R,{to:`/${m.username}/student/profile`,state:{...b.state,studentId:e==null?void 0:e._id,messageId:t,headId:o,instituteId:n},children:[a.jsxs("div",{className:s.student_table_content_card,style:{cursor:"pointer"},children:[a.jsx("p",{className:s.student_table_header_label,style:{flex:"1"},children:(e==null?void 0:e.studentGRNO)??""}),a.jsxs("div",{className:s.student_table_profile,style:{flex:"3"},children:[a.jsx("img",{src:e!=null&&e.studentProfilePhoto?`${A}/${e==null?void 0:e.studentProfilePhoto}`:`${W}/feed-user-avatar.svg`,loading:"lazy",alt:"avatar"}),a.jsxs("div",{children:[a.jsxs("p",{className:s.student_table_header_name,children:[`${(e==null?void 0:e.studentFirstName)??""} ${(e==null?void 0:e.studentMiddleName)??""} ${(e==null?void 0:e.studentLastName)??""}`,(e==null?void 0:e.profile_percentage)==="100"||(e==null?void 0:e.profile_percentage)===100?a.jsx("img",{src:`${p}/complete.svg`,loading:"lazy",alt:"avatar",style:{marginLeft:"0.6rem",height:"1rem"}}):null]}),a.jsx("p",{className:s.student_table_header_label_text,children:((i=e==null?void 0:e.studentClass)==null?void 0:i.classTitle)??""})]})]}),a.jsxs("div",{className:s.student_table_header_label,style:{flex:"2"},children:[a.jsxs("div",{className:s.student_table_contact,children:[a.jsx("img",{src:`${p}/gender.svg`,alt:"gender icon"}),a.jsx("p",{className:s.student_table_contact_email,children:e==null?void 0:e.studentGender})]}),a.jsxs("div",{className:s.student_table_contact,style:{marginTop:"0.4rem"},children:[a.jsx("img",{src:`${p}/phone.svg`,alt:"phone icon"}),a.jsx("p",{className:s.student_table_contact_number,children:e!=null&&e.user.userPhoneNumber?e==null?void 0:e.user.userPhoneNumber:(e==null?void 0:e.user.userEmail)??""})]})]}),a.jsx("p",{className:s.student_table_header_label,style:{flex:"1"},children:(e==null?void 0:e.applicable_fees_pending)??0})]}),a.jsx(x,{customStyleBorder:{margin:"0"}})]})})},Se=({instituteId:e,studentAlias:t,headId:o,messageId:n})=>{const{t:m}=$(),b=G(),i=u(),d=y(),[f,U]=_.useState(""),[C,F]=_.useState(1),[j,P]=_.useState(!0),[S,g]=D({skip:f}),[E,L]=_.useState(!1),{instituteAllStudent:r,instituteAllStudentLoading:k}=O({data:{id:e,page:C,limit:10,search:f},skip:!e});_.useEffect(()=>{g&&j&&F(l=>l+1)},[g,j]),_.useEffect(()=>{r!=null&&r.length&&Q(r==null?void 0:r.length,P)},[r==null?void 0:r.length]);const B=_.useCallback(V(l=>U(l),500),[]),M=l=>{B(l.target.value)},N=()=>{L(l=>!l)},T=()=>{b(`/${d.username}/member/staff/finance?type=message`,{state:i.state})};return a.jsxs(a.Fragment,{children:[a.jsxs(z,{children:[a.jsx(h,{children:a.jsxs("div",{className:c.fm_header_container,children:[a.jsx("h6",{children:m("all_students")}),a.jsxs("div",{className:c.fm_both_filter,children:[a.jsx("div",{className:c.fm_search,children:a.jsx("section",{className:c.fm_search_container,children:a.jsxs("div",{className:c.fm_search_container_inner,children:[a.jsx("img",{className:c.fm_search_icon,alt:"search icon",src:`${H}/navbar-search.svg`}),a.jsx("input",{type:"text",placeholder:m("search"),onChange:M})]})})}),a.jsx("img",{src:`${q}/history.svg`,alt:"history icon",onClick:T}),a.jsx(J,{label:"student_message",customStyle:{margin:"0"},onAction:N})]})]})}),a.jsx(x,{}),a.jsx(h,{children:a.jsx(ce,{studentAlias:t})}),a.jsx(x,{}),a.jsxs(h,{children:[k&&a.jsx(K,{}),r==null?void 0:r.map((l,w)=>(r==null?void 0:r.length)===w+1?a.jsx("div",{ref:S,children:a.jsx(v,{student:l,instituteId:e,messageId:n,headId:o})},l==null?void 0:l._id):a.jsx(v,{student:l,instituteId:e,messageId:n,headId:o},l==null?void 0:l._id))]})]}),E&&a.jsx(X,{onClose:N,messageId:n,instituteId:e,headId:o,parentState:i.state,toRedirectUrl:`/${d.username}/member/staff/finance?type=message`,viewAs:"FINANCE_MANAGER"})]})};export{Se as default};
