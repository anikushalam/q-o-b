import{a as F,u as R,r as d,j as s}from"./index-0b7f6bad.js";import{G as T,s as A}from"./GetStarted-3aea2d60.js";import{A as U}from"./AuthCardWrapper-94264118.js";import{B as C,N as E}from"./NotifyEvent-9d86708d.js";import{A as g}from"./AuthFormFieldWithIcon-da32dc47.js";import{r as I,e as N}from"./checkingRequiredField-382733fa.js";import{e as q}from"./auth-api-e4fca9d4.js";import{u as B,a as v}from"./AssestsBaseUrl-b3cf1f1b.js";import{d as H}from"./decrypt-74cd38a1.js";import"./CreateButton-31b890b3.js";import"./Utils.module-b6acf444.js";import"./MethodType-30df8d44.js";const X=()=>{const{t}=B(),l=F(),S=R(),[r,P]=d.useState({userPassword:"",userRePassword:""}),[W,u]=d.useState(!1),[m,b]=d.useState(""),[x,o]=d.useState({open:!1,msg:"",variant:"error"}),[y]=q(),p=i=>{P(n=>({...n,[i.target.name]:i.target.value}))},_=i=>{var c,w;i.preventDefault();let n=I(r);N(n)&&((c=l.state)!=null&&c.uid)?r.userPassword===r.userRePassword?(u(e=>!e),y({uid:(w=l.state)==null?void 0:w.uid,password:r}).then(e=>{var h,f;let a=H((h=e==null?void 0:e.data)==null?void 0:h.encrypt);(f=a==null?void 0:a.user)!=null&&f._id?S("/"):o({msg:"Invalid Change Password",open:!0,variant:"error"}),u(j=>!j)}).catch(e=>{o({msg:`Time out of request with reason ${e}`,open:!0,variant:"error"}),u(a=>!a)})):o({msg:"Please match your password and confirm password",open:!0,variant:"error"}):b(n)};return s.jsx(T,{children:s.jsx(U,{title:"change_password",subTitle:t("change_password_note"),subTitleStyle:{fontSize:"0.7rem"},children:s.jsxs("form",{onSubmit:_,className:A.auth_login_form,children:[s.jsx(g,{label:t("password"),placeholder:t("password_placeholder"),fieldIconUrl:`${v}/auth-password.svg`,validate:m.userPassword,name:"userPassword",value:r.userPassword,onChange:p,type:"password",isPassword:!0}),s.jsx(g,{label:t("confirm_password"),placeholder:t("password_confirm_placeholder"),fieldIconUrl:`${v}/auth-password.svg`,validate:m.userRePassword,name:"userRePassword",value:r.userRePassword,onChange:p,type:"password",isPassword:!0}),s.jsx(C,{type:"submit",buttonText:t("submit"),customStyleButton:{marginTop:"5rem"}}),s.jsx(E,{eventState:x,eventStateHandler:o})]})})})};export{X as default};
