import{r as d,u as M,j as e,Q as y}from"./index-840de58d.js";import{al as u,am as F,s as r}from"./StaffMemberConfig-7a36179e.js";import{U as T,B as D}from"./UserMemberContentWrapper-d4cbea5a.js";import{F as U}from"./FormTextarea-b8631928.js";import{M as b}from"./Modal-6a8c66d1.js";import{u as R,c as P,e as m}from"./AssestsBaseUrl-3e7ac4b0.js";import{C as H}from"./CreateButton-390a73d1.js";const W=({onClose:_,sendStudentList:s,messageId:l,instituteId:i,headId:N,viewAs:a,isStudentProfile:f,toRedirectUrl:h,parentState:A})=>{const{t:n}=R(),[x,c]=d.useState(!1),[g,S]=d.useState(!1),[p]=u(),[j]=F(),[t,I]=d.useState({alarm_mode:"APP_NOTIFICATION",content:""}),C=M(),O=()=>{t.content?f?l&&t.alarm_mode&&(s==null?void 0:s.length)>0&&i&&(c(o=>!o),j({sendMessage:{message:t.content,from:N??"",type:a==="ADMISSION_ADMIN"?"Admission Head":a==="FINANCE_MANAGER"?"Finance Head":a==="CERTIFICATE_AUTHORITY"?"Certificate Authority":a==="STUDENT_SECTION"?"Student Section":a==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:l??"",alarm_mode:t.alarm_mode,sid:s,flow:a==="INSTITUTE_ADMIN"?"INSTITUTE_ADMIN":"Other"},id:i}).then(()=>{_(),c(o=>!o)}).catch({})):l&&t.alarm_mode&&(s==null?void 0:s.length)>0&&i&&(c(o=>!o),p({sendMessage:{message:t.content,from:N??"",type:a==="ADMISSION_ADMIN"?"Admission Head":a==="FINANCE_MANAGER"?"Finance Head":a==="CERTIFICATE_AUTHORITY"?"Certificate Authority":a==="STUDENT_SECTION"?"Student Section":a==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:l??"",alarm_mode:t.alarm_mode,filtered_arr:s,flow:a==="INSTITUTE_ADMIN"?"INSTITUTE_ADMIN":"Other"},id:i}).then(()=>{_(),C(h,{state:A}),c(o=>!o)}).catch({})):S(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsxs("div",{className:r.modal_container,children:[e.jsx(T,{children:e.jsxs("div",{className:r.modal_container_outer_header,children:[e.jsx("div",{className:r.modal_container_header,children:e.jsx("h6",{children:n("student_message")})}),e.jsx("img",{src:`${P}/close.svg`,alt:"close icon",onClick:_})]})}),e.jsx(D,{}),e.jsxs(T,{customStyle:{paddingTop:"0"},children:[e.jsxs("section",{className:r.notify_container,onClick:()=>I(o=>({...o,alarm_mode:"APP_NOTIFICATION"})),children:[e.jsx("img",{src:t.alarm_mode==="APP_NOTIFICATION"?`${m}/radio-blue.svg`:`${m}/radio-grey.svg`,alt:"icon"}),e.jsxs("div",{className:r.notify_text,children:[e.jsx("h6",{children:n("Notify_with_In_app_Notification")}),e.jsx("p",{children:n("Notify_with_In_app_Notification_note")})]})]}),e.jsxs("section",{className:r.notify_container,children:[e.jsx("img",{src:t.alarm_mode==="EMAIL_NOTIFICATION"?`${m}/radio-blue.svg`:`${m}/radio-grey.svg`,alt:"icon"}),e.jsxs("div",{className:r.notify_text,children:[e.jsx("h6",{children:n("Notify_On_Email_and_SMS")}),e.jsx("p",{children:n("Notify_On_Email_and_SMS_note")})]})]}),t.alarm_mode==="APP_NOTIFICATION"&&e.jsx(U,{label:n("student_message_label"),placeholder:n("student_message_label_placeholder"),name:"content",value:t.content,type:"text",onChange:o=>I(E=>({...E,content:o.target.value})),errorShow:g}),e.jsx(H,{label:"confirm",onAction:O})]})]})}),x&&e.jsx(y,{})]})};export{W as A};
