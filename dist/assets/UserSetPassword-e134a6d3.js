import{a as _,r as d,j as t}from"./index-4403507e.js";import{G as A,s as C}from"./GetStarted-9010b363.js";import{g as R}from"./auth-api-e89939f9.js";import{u as T}from"./use-login-5fd982e6.js";import{r as U,e as F}from"./checkingRequiredField-382733fa.js";import{A as k}from"./AuthCardWrapper-7d03cdd2.js";import{A as h}from"./AuthFormFieldWithIcon-fae3c761.js";import{B as E,N as I}from"./NotifyEvent-ad5291c6.js";import{u as q,a as g}from"./AssestsBaseUrl-0f87f19c.js";import"./MethodType-30df8d44.js";import"./CreateButton-be4cb7e7.js";import"./Utils.module-b6acf444.js";const O=()=>{const{t:r}=q(),l=_(),[a,v]=d.useState({userPassword:"",userRePassword:""}),[B,u]=d.useState(!1),[m,S]=d.useState(""),[P,o]=d.useState({open:!1,msg:"",variant:"error"}),[b]=R(),{userDispatchAction:x}=T(),p=i=>{v(n=>({...n,[i.target.name]:i.target.value}))},y=i=>{var c,w;i.preventDefault();let n=U(a);F(n)&&((c=l.state)!=null&&c.uid)?a.userPassword===a.userRePassword?(u(s=>!s),b({uid:(w=l.state)==null?void 0:w.uid,password:a}).then(s=>{var f;let e=decryption((f=s==null?void 0:s.data)==null?void 0:f.encrypt);e!=null&&e.login?x({token:e==null?void 0:e.token,user:e==null?void 0:e.user,isUniversal:!1}):o({msg:"Invalid Create Password",open:!0,variant:"error"}),u(j=>!j)}).catch(s=>{o({msg:`Time out of request with reason ${s}`,open:!0,variant:"error"}),u(e=>!e)})):o({msg:"Please match your password and confirm password",open:!0,variant:"error"}):S(n)};return t.jsx(A,{children:t.jsx(k,{title:"create_password",subTitle:r("change_password_note"),subTitleStyle:{fontSize:"0.7rem"},titleStyle:{fontSize:"1rem"},children:t.jsxs("form",{onSubmit:y,className:C.auth_login_form,children:[t.jsx(h,{label:r("password"),placeholder:r("password_placeholder"),fieldIconUrl:`${g}/auth-password.svg`,validate:m.userPassword,name:"userPassword",value:a.userPassword,onChange:p,type:"password",isPassword:!0}),t.jsx(h,{label:r("confirm_password"),placeholder:r("password_confirm_placeholder"),fieldIconUrl:`${g}/auth-password.svg`,validate:m.userRePassword,name:"userRePassword",value:a.userRePassword,onChange:p,type:"password",isPassword:!0}),t.jsx(E,{type:"submit",buttonText:r("submit"),customStyleButton:{marginTop:"5rem"}}),t.jsx(I,{eventState:P,eventStateHandler:o})]})})})};export{O as default};
