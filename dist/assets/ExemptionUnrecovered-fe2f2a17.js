import{j as a,i as M,r as e}from"./index-0b7f6bad.js";import{U as P,s as d}from"./FinanceManager-a3d1c044.js";import{U as v}from"./UserMemberContentWrapper-bd4f7483.js";import{B as y,L as C}from"./UserMemberProfileWrapper-9593601c.js";import{u as F,n as L,c as D}from"./StaffMemberConfig-a4319af1.js";import{X as Y}from"./finance-manager-api-60207d3b.js";import{u as N,b as k,f as w}from"./AssestsBaseUrl-b3cf1f1b.js";import{d as B}from"./dayjs.min-2c4d82f7.js";import"./UiTab.module-f6b989ec.js";import"./FormInputView-4c2d301f.js";import"./CreateButton-31b890b3.js";import"./auth-api-e4fca9d4.js";import"./MethodType-30df8d44.js";import"./Modal-07d3eb1d.js";import"./Utils.module-b6acf444.js";import"./checkingRequiredField-382733fa.js";import"./PlateformUser.module-0e3694bb.js";import"./decrypt-74cd38a1.js";const E="_exemption_card_1hrbv_1",T="_exemption_card_text_1hrbv_23",V="_exemption_card_name_1hrbv_26",W="_exemption_card_amount_1hrbv_27",I="_exemption_card_batch_1hrbv_28",h={exemption_card:E,exemption_card_text:T,exemption_card_name:V,exemption_card_amount:W,exemption_card_batch:I},b=({exemption:s})=>{var c,o,u,i,m,_,j,f,n;const{t:l}=N();return a.jsxs("section",{className:h.exemption_card,children:[a.jsx("img",{src:(c=s==null?void 0:s.student)!=null&&c.studentProfilePhoto?`${M}/${(o=s==null?void 0:s.student)==null?void 0:o.studentProfilePhoto}`:`${k}/feed-user-avatar.svg`,alt:"student avatar"}),a.jsxs("div",{className:h.exemption_card_text,children:[a.jsxs("div",{className:h.exemption_card_name,children:[a.jsx("h6",{children:`${(u=s==null?void 0:s.student)==null?void 0:u.studentFirstName} ${(i=s==null?void 0:s.student)!=null&&i.studentMiddleName?(m=s==null?void 0:s.student)==null?void 0:m.studentMiddleName:""} ${(_=s==null?void 0:s.student)==null?void 0:_.studentLastName}`}),a.jsxs("h6",{children:[l("rs")," ",(s==null?void 0:s.fee_payment_amount)??0]})]}),a.jsxs("div",{className:h.exemption_card_amount,children:[a.jsx("p",{children:l("admission_fees_paid")}),a.jsx("p",{children:((j=s==null?void 0:s.student)==null?void 0:j.admissionPaidFeeCount)??0})]}),a.jsxs("div",{className:h.exemption_card_batch,children:[a.jsx("p",{children:`(${((n=(f=s==null?void 0:s.student)==null?void 0:f.batches)==null?void 0:n.batchName)??""})`}),a.jsx("p",{children:B(s==null?void 0:s.fee_transaction_date).format("DD MMM YYYY")})]})]})]})},cs=({fid:s,exemptBalance:l})=>{const{t:c}=N(),[o,u]=e.useState(""),[i,m]=e.useState(1),[_,j]=e.useState(!0),[f,n]=F({skip:o}),{financeAllExemption:t,financeAllExemptionLoading:g}=Y({data:{fid:s,page:i,limit:2},skip:!s});e.useEffect(()=>{n&&_&&m(r=>r+1)},[n,_]),e.useEffect(()=>{t!=null&&t.length&&L(financeFeeList==null?void 0:financeFeeList.length,j)},[t==null?void 0:t.length]);const U=e.useCallback(D(r=>u(r),500),[]),$=r=>{U(r.target.value)};return a.jsxs(P,{children:[a.jsx(v,{children:a.jsxs("div",{className:d.fm_header_container,children:[a.jsx("h6",{children:c("exemption_unrecovered")}),a.jsx("div",{className:d.fm_search,children:a.jsx("section",{className:d.fm_search_container,children:a.jsxs("div",{className:d.fm_search_container_inner,children:[a.jsx("img",{className:d.fm_search_icon,alt:"search icon",src:`${w}/navbar-search.svg`}),a.jsx("input",{type:"text",placeholder:c("search"),onChange:$})]})})})]})}),a.jsx(y,{}),a.jsxs(v,{customStyle:{paddingTop:"0"},children:[a.jsx("p",{className:d.fm_all_time_data,children:c("all_time_data")}),a.jsxs("h6",{className:d.fm_total_amount,children:[c("total_amount")," ",c("rs")," ",l??0]}),g&&a.jsx(C,{}),t==null?void 0:t.map((r,S)=>(t==null?void 0:t.length)===S+1?a.jsx("div",{ref:f,children:a.jsx(b,{exemption:r})},r==null?void 0:r._id):a.jsx(b,{exemption:r},r==null?void 0:r._id))]})]})};export{cs as default};
