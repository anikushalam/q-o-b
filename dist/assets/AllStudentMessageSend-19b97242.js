import{r as d,u as M,j as e,Q as y}from"./index-0b7f6bad.js";import{ah as u,ai as F}from"./finance-manager-api-60207d3b.js";import{B as D}from"./UserMemberProfileWrapper-9593601c.js";import{F as U}from"./FormTextarea-dd65b7be.js";import{M as b}from"./Modal-07d3eb1d.js";import{U as T}from"./UserMemberContentWrapper-bd4f7483.js";import{s as n}from"./StaffMemberConfig-a4319af1.js";import{u as R,c as P,e as m}from"./AssestsBaseUrl-b3cf1f1b.js";import{C as H}from"./CreateButton-31b890b3.js";const z=({onClose:_,sendStudentList:s,messageId:i,instituteId:l,headId:N,viewAs:a,isStudentProfile:f,toRedirectUrl:h,parentState:A})=>{const{t:r}=R(),[x,c]=d.useState(!1),[p,g]=d.useState(!1),[S]=u(),[j]=F(),[t,I]=d.useState({alarm_mode:"APP_NOTIFICATION",content:""}),C=M(),O=()=>{t.content?f?i&&t.alarm_mode&&(s==null?void 0:s.length)>0&&l&&(c(o=>!o),j({sendMessage:{message:t.content,from:N??"",type:a==="ADMISSION_ADMIN"?"Admission Head":a==="FINANCE_MANAGER"?"Finance Head":a==="CERTIFICATE_AUTHORITY"?"Certificate Authority":a==="STUDENT_SECTION"?"Student Section":a==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:i??"",alarm_mode:t.alarm_mode,sid:s,flow:a==="INSTITUTE_ADMIN"?"INSTITUTE_ADMIN":"Other"},id:l}).then(()=>{_(),c(o=>!o)}).catch({})):i&&t.alarm_mode&&(s==null?void 0:s.length)>0&&l&&(c(o=>!o),S({sendMessage:{message:t.content,from:N??"",type:a==="ADMISSION_ADMIN"?"Admission Head":a==="FINANCE_MANAGER"?"Finance Head":a==="CERTIFICATE_AUTHORITY"?"Certificate Authority":a==="STUDENT_SECTION"?"Student Section":a==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:i??"",alarm_mode:t.alarm_mode,filtered_arr:s,flow:a==="INSTITUTE_ADMIN"?"INSTITUTE_ADMIN":"Other"},id:l}).then(()=>{_(),C(h,{state:A}),c(o=>!o)}).catch({})):g(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsxs("div",{className:n.modal_container,children:[e.jsx(T,{children:e.jsxs("div",{className:n.modal_container_outer_header,children:[e.jsx("div",{className:n.modal_container_header,children:e.jsx("h6",{children:r("student_message")})}),e.jsx("img",{src:`${P}/close.svg`,alt:"close icon",onClick:_})]})}),e.jsx(D,{}),e.jsxs(T,{customStyle:{paddingTop:"0"},children:[e.jsxs("section",{className:n.notify_container,onClick:()=>I(o=>({...o,alarm_mode:"APP_NOTIFICATION"})),children:[e.jsx("img",{src:t.alarm_mode==="APP_NOTIFICATION"?`${m}/radio-blue.svg`:`${m}/radio-grey.svg`,alt:"icon"}),e.jsxs("div",{className:n.notify_text,children:[e.jsx("h6",{children:r("Notify_with_In_app_Notification")}),e.jsx("p",{children:r("Notify_with_In_app_Notification_note")})]})]}),e.jsxs("section",{className:n.notify_container,children:[e.jsx("img",{src:t.alarm_mode==="EMAIL_NOTIFICATION"?`${m}/radio-blue.svg`:`${m}/radio-grey.svg`,alt:"icon"}),e.jsxs("div",{className:n.notify_text,children:[e.jsx("h6",{children:r("Notify_On_Email_and_SMS")}),e.jsx("p",{children:r("Notify_On_Email_and_SMS_note")})]})]}),t.alarm_mode==="APP_NOTIFICATION"&&e.jsx(U,{label:r("student_message_label"),placeholder:r("student_message_label_placeholder"),name:"content",value:t.content,type:"text",onChange:o=>I(E=>({...E,content:o.target.value})),errorShow:p}),e.jsx(H,{label:"confirm",onAction:O})]})]})}),x&&e.jsx(y,{})]})};export{z as A};
