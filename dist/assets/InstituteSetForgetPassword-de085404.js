import{a as _,u as F,r as d,j as s}from"./index-4403507e.js";import{G as R,s as T}from"./GetStarted-9010b363.js";import{A}from"./AuthCardWrapper-7d03cdd2.js";import{B as C,N as I}from"./NotifyEvent-ad5291c6.js";import{A as f}from"./AuthFormFieldWithIcon-fae3c761.js";import{r as U,e as E}from"./checkingRequiredField-382733fa.js";import{e as N}from"./auth-api-e89939f9.js";import{u as q,a as g}from"./AssestsBaseUrl-0f87f19c.js";import{d as B}from"./decrypt-5e8ab41f.js";import"./CreateButton-be4cb7e7.js";import"./Utils.module-b6acf444.js";import"./MethodType-30df8d44.js";const V=()=>{const{t}=q(),l=_(),v=F(),[r,S]=d.useState({userPassword:"",userRePassword:""}),[H,u]=d.useState(!1),[m,P]=d.useState(""),[b,o]=d.useState({open:!1,msg:"",variant:"error"}),[x]=N(),p=i=>{S(n=>({...n,[i.target.name]:i.target.value}))},y=i=>{var c,w;i.preventDefault();let n=U(r);E(n)&&((c=l.state)!=null&&c.uid)?r.userPassword===r.userRePassword?(u(e=>!e),x({uid:(w=l.state)==null?void 0:w.uid,password:r}).then(e=>{var h;let a=B((h=e==null?void 0:e.data)==null?void 0:h.encrypt);a!=null&&a.institute?v("/"):o({msg:"Invalid Change Password",open:!0,variant:"error"}),u(j=>!j)}).catch(e=>{o({msg:`Time out of request with reason ${e}`,open:!0,variant:"error"}),u(a=>!a)})):o({msg:"Please match your password and confirm password",open:!0,variant:"error"}):P(n)};return s.jsx(R,{children:s.jsx(A,{title:"change_password",subTitle:t("change_password_note"),subTitleStyle:{fontSize:"0.7rem"},children:s.jsxs("form",{onSubmit:y,className:T.auth_login_form,children:[s.jsx(f,{label:t("password"),placeholder:t("password_placeholder"),fieldIconUrl:`${g}/auth-password.svg`,validate:m.userPassword,name:"userPassword",value:r.userPassword,onChange:p,type:"password",isPassword:!0}),s.jsx(f,{label:t("confirm_password"),placeholder:t("password_confirm_placeholder"),fieldIconUrl:`${g}/auth-password.svg`,validate:m.userRePassword,name:"userRePassword",value:r.userRePassword,onChange:p,type:"password",isPassword:!0}),s.jsx(C,{type:"submit",buttonText:t("submit"),customStyleButton:{marginTop:"5rem"}}),s.jsx(I,{eventState:b,eventStateHandler:o})]})})})};export{V as default};
