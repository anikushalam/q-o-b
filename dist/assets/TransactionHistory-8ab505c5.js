import{f as E,a as U,j as a,L as D,i as M,r as d,_ as z,l as O,Q as T}from"./index-840de58d.js";import{s as x,U as H}from"./FinanceManager-0ca2f058.js";import{U as b,B as F}from"./UserMemberContentWrapper-d4cbea5a.js";import{H as V,a as B}from"./FormInputView-8f94e437.js";import{a as K,a4 as Q,n as W,j as Y}from"./StaffMemberConfig-7a36179e.js";import{d as I}from"./dayjs.min-1b7b0994.js";import{l as q}from"./localTime-e3caacba.js";import{u as w,c as G,f as J}from"./AssestsBaseUrl-3e7ac4b0.js";import{L as X}from"./Loading-1f40e573.js";const Z="_settle_card_4p5ek_1",A="_settle_card_container_4p5ek_12",h="_settle_card_text_4p5ek_23",y="_settle_paragraph_4p5ek_36",ee="_sidebarheader_4p5ek_51",ae="_text_4p5ek_63",ne="_rcv_4p5ek_71",te="_history_image_container_4p5ek_84",s={settle_card:Z,settle_card_container:A,settle_card_text:h,settle_paragraph:y,sidebarheader:ee,text:ae,rcv:ne,history_image_container:te},C=({history:e})=>{var p,r,c,f,j,u,n,g,i,v,t,N,o,L,S,k,$,P,R;const{t:_}=w(),m=E(),l=U();return a.jsx(a.Fragment,{children:a.jsxs("div",{className:s.sidebarheader,style:{gap:"1%"},title:(e==null?void 0:e.payment_module_type)==="Income"?"":"View Receipt",children:[a.jsxs("div",{className:s.history_image_container,style:{width:"50%"},children:[(p=e==null?void 0:e.payment_student)!=null&&p.studentProfilePhoto?a.jsx(D,{to:`/${m.username}/student/profile`,state:{...l.state,studentId:(r=e==null?void 0:e.payment_student)==null?void 0:r._id},children:a.jsx("img",{src:`${M}/${(c=e==null?void 0:e.payment_student)==null?void 0:c.studentProfilePhoto}`,alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,a.jsxs("div",{className:s.text,children:[a.jsx("p",{className:s.rcv,children:_("recived_from")}),a.jsx("h6",{children:e!=null&&e.payment_student?`${(f=e==null?void 0:e.payment_student)==null?void 0:f.studentFirstName} ${(j=e==null?void 0:e.payment_student)==null?void 0:j.studentMiddleName} ${(u=e==null?void 0:e.payment_student)==null?void 0:u.studentLastName}`:((n=e==null?void 0:e.payment_by_end_user_id)==null?void 0:n.userLegalName)??(e==null?void 0:e.payment_by_end_user_id_name)}),a.jsxs("p",{className:s.rcv,children:[_("gr_number")," ",((g=e==null?void 0:e.payment_student)==null?void 0:g.studentGRNO)??""]}),a.jsx("p",{className:s.rcv,children:((v=(i=e==null?void 0:e.payment_student)==null?void 0:i.fee_structure)==null?void 0:v.unique_structure_name)??""})]})]}),a.jsxs("div",{className:s.text,style:{width:"27%"},children:[a.jsx("p",{className:s.rcv,style:{width:"100%"},children:_("transaction_id")}),a.jsx("h6",{style:{width:"100%",wordWrap:"break-word"},children:e!=null&&e.razorpay_payment_id?e==null?void 0:e.razorpay_payment_id:(t=e==null?void 0:e.fee_receipt)!=null&&t.fee_utr_reference?(N=e==null?void 0:e.fee_receipt)==null?void 0:N.fee_utr_reference:"N/A"}),a.jsxs("p",{className:s.rcv,style:{width:"100%"},children:[I(e==null?void 0:e.created_at).format("DD MMM YYYY"),", ",q(e==null?void 0:e.created_at,"LT")]})]}),a.jsxs("div",{className:s.text,style:{width:"20%"},children:[a.jsxs("p",{className:s.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[_("invoice_no")," ",((o=e==null?void 0:e.fee_receipt)==null?void 0:o.invoice_count)??(e==null?void 0:e.payment_invoice_number)??"N/A",a.jsx("img",{src:`${G}/receipt.svg`,alt:"receipt icon",title:"Download Fees Receipt"})]}),a.jsxs("h6",{style:{width:"100%"},children:["Rs. ",e==null?void 0:e.payment_amount]}),a.jsx("p",{className:s.rcv,style:{width:"100%"},children:((L=e.payment_mode)==null?void 0:L.toLowerCase())==="offline"?(S=e==null?void 0:e.fee_receipt)!=null&&S.fee_payment_mode?`${(k=e==null?void 0:e.fee_receipt)==null?void 0:k.fee_payment_mode}`:"Offline - No Receipt":(($=e.payment_mode)==null?void 0:$.toLowerCase())==="online"?(P=e==null?void 0:e.fee_receipt)!=null&&P.fee_payment_mode?`${(R=e==null?void 0:e.fee_receipt)==null?void 0:R.fee_payment_mode}`:"Online - No Receipt":e==null?void 0:e.payment_mode})]})]})})},ce=({instituteId:e})=>{const{t:_}=w(),[m,l]=d.useState(""),[p,r]=d.useState(1),[c,f]=d.useState(!0),[j,u]=K({skip:m}),{financeAllTransaction:n,financeAllTransactionLoading:g}=Q({data:{uid:e,page:p,limit:10,search:m,filter:""},skip:!e});d.useEffect(()=>{u&&c&&r(t=>t+1)},[u,c]),d.useEffect(()=>{n!=null&&n.length&&W(n==null?void 0:n.length,f)},[n==null?void 0:n.length]);const i=d.useCallback(Y(t=>l(t),500),[]),v=t=>{i(t.target.value)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:x.fm_search_full,children:a.jsx("section",{className:x.fm_search_full_container,children:a.jsxs("div",{className:x.fm_search_full_container_inner,children:[a.jsx("img",{className:x.fm_search_full_icon,alt:"search icon",src:`${J}/navbar-search.svg`}),a.jsx("input",{type:"text",placeholder:_("search"),onChange:v})]})})}),g&&a.jsx(X,{}),n==null?void 0:n.map((t,N)=>(n==null?void 0:n.length)===N+1?a.jsx("div",{ref:j,children:a.jsx(C,{history:t})},t==null?void 0:t._id):a.jsx(C,{history:t},t==null?void 0:t._id))]})},se=d.lazy(()=>z(()=>import("./FinanceSettlement-781458da.js"),["assets/FinanceSettlement-781458da.js","assets/index-840de58d.js","assets/index-cd302a39.css","assets/StaffMemberConfig-7a36179e.js","assets/decrypt-c89175fd.js","assets/MethodType-30df8d44.js","assets/Modal-6a8c66d1.js","assets/BackdropModal-142f7ac8.js","assets/Utils.module-b6acf444.js","assets/Utils-bf34d50f.css","assets/UserDrawer-bfa56692.js","assets/AssestsBaseUrl-3e7ac4b0.js","assets/UserDrawer-881ca865.css","assets/Loading-1f40e573.js","assets/Loading-8c2caac8.css","assets/StaffMemberConfig-3f0647ee.css","assets/FinanceManager-0ca2f058.js","assets/UserMemberContentWrapper-d4cbea5a.js","assets/UserMemberContentWrapper-831b2952.css","assets/UiTab.module-f6b989ec.js","assets/UiTab-45d9bcb4.css","assets/FormInputView-8f94e437.js","assets/dayjs.min-1b7b0994.js","assets/dayjs-5f1ac0fd.css","assets/CreateButton-390a73d1.js","assets/CreateButton-a52028df.css","assets/auth-api-76ff487b.js","assets/checkingRequiredField-382733fa.js","assets/PlateformUser.module-0e3694bb.js","assets/PlateformUser-b9d838ae.css","assets/FinanceManager-196ee2fd.css","assets/localTime-e3caacba.js"])),_e=d.lazy(()=>z(()=>import("./FinanceHistory-256e1463.js"),["assets/FinanceHistory-256e1463.js","assets/index-840de58d.js","assets/index-cd302a39.css","assets/StaffMemberConfig-7a36179e.js","assets/decrypt-c89175fd.js","assets/MethodType-30df8d44.js","assets/Modal-6a8c66d1.js","assets/BackdropModal-142f7ac8.js","assets/Utils.module-b6acf444.js","assets/Utils-bf34d50f.css","assets/UserDrawer-bfa56692.js","assets/AssestsBaseUrl-3e7ac4b0.js","assets/UserDrawer-881ca865.css","assets/Loading-1f40e573.js","assets/Loading-8c2caac8.css","assets/StaffMemberConfig-3f0647ee.css","assets/FinanceManager-0ca2f058.js","assets/UserMemberContentWrapper-d4cbea5a.js","assets/UserMemberContentWrapper-831b2952.css","assets/UiTab.module-f6b989ec.js","assets/UiTab-45d9bcb4.css","assets/FormInputView-8f94e437.js","assets/dayjs.min-1b7b0994.js","assets/dayjs-5f1ac0fd.css","assets/CreateButton-390a73d1.js","assets/CreateButton-a52028df.css","assets/auth-api-76ff487b.js","assets/checkingRequiredField-382733fa.js","assets/PlateformUser.module-0e3694bb.js","assets/PlateformUser-b9d838ae.css","assets/FinanceManager-196ee2fd.css","assets/localTime-e3caacba.js"])),de=[{label:"receipts",id:"receipt",urlKey:""},{label:"payments",id:"payment",urlKey:"&n=payment"},{label:"settlement_history",id:"settlement",urlKey:"&n=settlement"}],le=({fid:e,instituteId:_})=>{const{t:m}=w(),[l]=O(),p=U(),r=E();return a.jsxs(H,{children:[a.jsx(b,{children:a.jsx("div",{className:x.fm_header_container,children:a.jsx("h6",{children:m("transaction_history")})})}),a.jsx(F,{}),a.jsxs(b,{customStyle:{paddingTop:"0"},children:[a.jsx(V,{children:de.map(c=>a.jsx(B,{tab:c,isLink:!0,isActive:c.id==="receipt"&&!l.get("n")?!0:l.get("n")===c.id,parentState:p.state,url:`/${r.username}/member/staff/finance?type=history${c.urlKey}`},c==null?void 0:c.id))}),a.jsx(F,{customStyleBorder:{marginTop:"0"}})]}),a.jsx(b,{customStyle:{paddingTop:"0"},children:a.jsx(d.Suspense,{fallback:a.jsx(T,{}),children:l.get("n")==="payment"?a.jsx(_e,{instituteId:_}):l.get("n")==="settlement"?a.jsx(se,{instituteId:_}):a.jsx(ce,{instituteId:_})})})]})},ve=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{ve as T,s};
